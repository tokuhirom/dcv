# lefthook.yml
# Git hooks configuration for dcv project

pre-commit:
  parallel: false
  commands:
    format:
      run: make fmt
      tags: format
      stage_fixed: true
      
    lint:
      run: make lint
      tags: lint
      
    test:
      run: make test
      tags: test
      
    screenshots:
      run: |
        # Check if UI files were modified
        if git diff --cached --name-only | grep -q "internal/ui/"; then
          echo "UI files modified, generating screenshots..."
          go run -tags screenshots cmd/generate-screenshots/main.go
          git add docs/screenshots/
        fi
      tags: screenshots
      
pre-push:
  parallel: true
  commands:
    test-full:
      run: make test
      tags: test